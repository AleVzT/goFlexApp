"use strict";(self.webpackChunkflex_bot_app=self.webpackChunkflex_bot_app||[]).push([[176],{4176:(Ae,k,s)=>{s.r(k),s.d(k,{PagesModule:()=>Ze});var i=s(6223),u=s(6814),f=s(3403),e=s(5879),T=s(9809),h=s(2296),b=s(617),C=s(9038),S=s(2651),L=s(1274);function q(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-icon",10),e._uU(2),e.qZA(),e._uU(3),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.icon),e.xp6(1),e.hij(" ",t.label," ")}}function D(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-list-item",8),e.NdJ("click",function(){e.CHM(t),e.oxw();const r=e.MAs(2);return e.KtG(r.toggle())}),e.YNc(1,q,4,2,"ng-container",9),e.qZA()}if(2&n){const t=a.$implicit,o=e.oxw();let r;e.Q6J("routerLink",t.url),e.xp6(1),e.Q6J("ngIf","Admin"!==t.label||"Admin"===t.label&&"ADMIN"===(null==(r=o.user())?null:r.type))}}const J=function(){return{width:"250px"}};let $=(()=>{class n{constructor(t,o){this.authService=t,this.router=o,this.sidebarItems=[{label:"Controller",icon:"view_list",url:"./controller"},{label:"Admin",icon:"settings",url:"./admin"}],this.user=(0,e.Flj)(()=>this.authService.currentUser())}onLogout(){this.authService.logout(),this.router.navigate(["/auth/login"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.J),e.Y36(f.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-layout-page"]],decls:24,vars:4,consts:[["fullscreen",""],["mode","push",3,"ngStyle"],["sidenav",""],["color","primary"],[1,"spacer"],["mat-icon-button","",3,"click"],[3,"routerLink","click",4,"ngFor","ngForOf"],[1,"container","p-2"],[3,"routerLink","click"],[4,"ngIf"],["matListItemIcon",""]],template:function(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2)(3,"mat-toolbar",3)(4,"span"),e._uU(5,"Men\xfa"),e.qZA(),e._UZ(6,"span",4),e.TgZ(7,"button",5),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(2);return e.KtG(c.toggle())}),e.TgZ(8,"mat-icon"),e._uU(9,"menu"),e.qZA()()(),e.TgZ(10,"mat-nav-list"),e.YNc(11,D,2,2,"mat-list-item",6),e.qZA()(),e.TgZ(12,"mat-toolbar",3)(13,"button",5),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(2);return e.KtG(c.toggle())}),e.TgZ(14,"mat-icon"),e._uU(15,"menu"),e.qZA()(),e._UZ(16,"span",4),e.TgZ(17,"span"),e._uU(18),e.qZA(),e.TgZ(19,"button",5),e.NdJ("click",function(){return o.onLogout()}),e.TgZ(20,"mat-icon"),e._uU(21,"logout"),e.qZA()()(),e.TgZ(22,"div",7),e._UZ(23,"router-outlet"),e.qZA()()}if(2&t){let r;e.xp6(1),e.Q6J("ngStyle",e.DdM(3,J)),e.xp6(10),e.Q6J("ngForOf",o.sidebarItems),e.xp6(7),e.Oqu(null==(r=o.user())?null:r.email)}},dependencies:[u.sg,u.O5,u.PC,f.lC,f.rH,h.RK,b.Hw,C.Hk,C.Tg,C.Yt,S.JX,S.TM,L.Ye],encapsulation:2}),n})();var m=s(9862),U=s(9413),M=s(5619),p=s(6306),y=s(2096),E=s(7398);let v=(()=>{class n{constructor(t){this.http=t,this.baseUrl=U.T.baseUrl,this.usersSubject=new M.X([]),this.users$=this.usersSubject.asObservable()}getUsers(){const t=`${this.baseUrl}/users`,o=localStorage.getItem("token"),r=(new m.WM).set("x-token",`${o}`);this.http.get(t,{headers:r}).subscribe(l=>{this.usersSubject.next(l)})}getUsersById(t){const o=`${this.baseUrl}/users/${t}`,r=localStorage.getItem("token"),l=(new m.WM).set("x-token",`${r}`);return this.http.get(o,{headers:l}).pipe((0,p.K)(c=>(0,y.of)(void 0)))}addUser(t){const o=`${this.baseUrl}/users`,r=localStorage.getItem("token"),l=(new m.WM).set("x-token",`${r}`);return this.http.post(o,t,{headers:l})}updateUser(t){const o=`${this.baseUrl}/users/${t._id}`,r=localStorage.getItem("token"),l=(new m.WM).set("x-token",`${r}`);if(!t._id)throw Error("User id is required");return this.http.patch(o,t,{headers:l})}deleteUserById(t){const o=`${this.baseUrl}/users/${t}`,r=localStorage.getItem("token"),l=(new m.WM).set("x-token",`${r}`);return this.http.delete(o,{headers:l}).pipe((0,p.K)(c=>(0,y.of)(!1)),(0,E.U)(c=>!0))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Z=s(6385),A=s(2939),d=s(5195),_=s(9157),F=s(2032);function R(n,a){if(1&n&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.user.fullname)}}let N=(()=>{class n{constructor(t,o){this.userServices=t,this.snackbar=o,this.closeModal=new e.vpe,this.userForm=new i.cw({_id:new i.NI(""),fullname:new i.NI("",{nonNullable:!0}),email:new i.NI("",{nonNullable:!0}),password:new i.NI("",{nonNullable:!0}),comment:new i.NI("",{nonNullable:!0}),telefono:new i.NI("",{nonNullable:!0}),active:new i.NI(!0),type:new i.NI("USER")})}get currentUser(){return this.userForm.value}ngOnInit(){this.user&&this.userForm.reset(this.user)}onSubmit(){if(!this.userForm.invalid){if(this.currentUser._id)return void this.userServices.updateUser(this.currentUser).pipe((0,p.K)(t=>(this.onCloseModal(),this.showSnackBar(t.error.msg),[]))).subscribe(t=>{this.showSnackBar(`${t.fullname} update!`),this.onCloseModal()});this.userServices.addUser(this.currentUser).pipe((0,p.K)(t=>(this.onCloseModal(),this.showSnackBar(t.error.msg),[]))).subscribe(t=>{this.onCloseModal(),this.showSnackBar(`${t.fullname} created!`)})}}onCloseModal(){this.closeModal.emit()}showSnackBar(t){this.snackbar.open(t,"done",{duration:2500})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v),e.Y36(A.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-right-modal"]],inputs:{user:"user"},outputs:{closeModal:"closeModal"},decls:41,vars:3,consts:[[1,"modal-container"],[1,"modal-content"],[4,"ngIf"],[1,"mb-2"],[1,"grid"],[1,"col-12","sm:col-12"],[1,"grid",3,"formGroup","ngSubmit"],[1,"col-12"],["matInput","","type","text","required","","formControlName","fullname"],["matInput","","type","mail","required","","formControlName","email"],["matInput","","type","password","required","","formControlName","password"],["matInput","","type","string","required","","formControlName","telefono"],["matInput","","placeholder","Pegar aqui la URL","formControlName","comment","required",""],["href","https://www.amazon.com/ap/signin?ie=UTF8&clientContext=134-9172090-0857541&openid.pape.max_auth_age=0&use_global_authentication=false&accountStatusPolicy=P1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&use_audio_captcha=false&language=en_US&pageId=amzn_device_na&arb=97b4a0fe-13b8-45fd-b405-ae94b0fec45b&openid.return_to=https%3A%2F%2Fwww.amazon.com%2Fap%2Fmaplanding&openid.assoc_handle=amzn_device_na&openid.oa2.response_type=token&openid.mode=checkid_setup&openid.ns.pape=http%3A%2F%2Fspecs.openid.net%2Fextensions%2Fpape%2F1.0&openid.ns.oa2=http%3A%2F%2Fwww.amazon.com%2Fap%2Fext%2Foauth%2F2&openid.oa2.scope=device_auth_access&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&disableLoginPrepopulate=0&openid.oa2.client_id=device%3A32663430323338643639356262653236326265346136356131376439616135392341314d50534c4643374c3541464b&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0","rel","noopener noreferrer","target","_blank"],["mat-flat-button","","color","warn",3,"click"],[1,"spacer"],["mat-flat-button","","color","primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3),e.YNc(4,R,2,1,"small",2),e.qZA(),e._UZ(5,"mat-divider",3),e.TgZ(6,"div",4)(7,"div",5)(8,"mat-card")(9,"mat-card-content")(10,"form",6),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(11,"mat-form-field",7)(12,"mat-label"),e._uU(13,"Full Name"),e.qZA(),e._UZ(14,"input",8),e.qZA(),e.TgZ(15,"mat-form-field",7)(16,"mat-label"),e._uU(17,"Email"),e.qZA(),e._UZ(18,"input",9),e.qZA(),e.TgZ(19,"mat-form-field",7)(20,"mat-label"),e._uU(21,"Contrase\xf1a"),e.qZA(),e._UZ(22,"input",10),e.qZA(),e.TgZ(23,"mat-form-field",7)(24,"mat-label"),e._uU(25,"Telefono"),e.qZA(),e._UZ(26,"input",11),e.qZA(),e.TgZ(27,"mat-form-field",7)(28,"mat-label"),e._uU(29,"Url de homologaci\xf3n"),e.qZA(),e._UZ(30,"textarea",12),e.qZA(),e.TgZ(31,"a",13),e._uU(32,"Para obtener la URL"),e.qZA()()(),e.TgZ(33,"mat-card-actions")(34,"button",14),e.NdJ("click",function(){return o.onCloseModal()}),e._uU(35,"BACK"),e.qZA(),e._UZ(36,"span",15),e.TgZ(37,"button",16),e.NdJ("click",function(){return o.onSubmit()}),e.TgZ(38,"mat-icon"),e._uU(39,"save"),e.qZA(),e._uU(40," SAVE "),e.qZA()()()()()()()),2&t&&(e.xp6(3),e.hij(" ",o.user?"Editar":"Agregar"," Usuario "),e.xp6(1),e.Q6J("ngIf",o.user),e.xp6(6),e.Q6J("formGroup",o.userForm))},dependencies:[u.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,h.lW,d.a8,d.hq,d.dn,_.KE,_.hX,b.Hw,F.Nt,Z.d],encapsulation:2}),n})();function j(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-right-modal",4),e.NdJ("closeModal",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.closeModal())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("user",t.user)}}const B=function(n){return{color:n}};let H=(()=>{class n{constructor(t,o){this.userServices=t,this.snackbar=o,this.isModalOpen=!1,this.updateList=new e.vpe}ngOnInit(){if(!this.user)throw Error("User property is required")}handleChangeState(t){const o={...t,active:!t.active};this.userServices.updateUser(o).subscribe(r=>{this.showSnackBar(`${t.fullname} update!`),this.updateList.emit()})}handleEdit(t){this.isModalOpen=!0}handleDelete(t){this.userServices.deleteUserById(t._id).subscribe(o=>{this.showSnackBar(o?`User ${t.fullname} removed!`:"Error when trying to delete user!"),this.updateList.emit()})}closeModal(){this.isModalOpen=!1,this.updateList.emit()}showSnackBar(t){this.snackbar.open(t,"done",{duration:2500})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v),e.Y36(A.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["users-user-card"]],inputs:{user:"user"},outputs:{updateList:"updateList"},decls:24,vars:8,consts:[["align","end"],["mat-button","","mat-raised","",3,"click"],["mat-button","","mat-raised","",3,"ngStyle","click"],[3,"user","closeModal",4,"ngIf"],[3,"user","closeModal"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-subtitle")(5,"b"),e._uU(6,"Email:"),e.qZA(),e._uU(7),e._UZ(8,"br"),e.TgZ(9,"b"),e._uU(10,"Telefono:"),e.qZA(),e._uU(11),e.qZA()(),e.TgZ(12,"mat-card-actions",0)(13,"button",1),e.NdJ("click",function(){return o.handleEdit(o.user)}),e.TgZ(14,"mat-icon"),e._uU(15,"edit"),e.qZA(),e._uU(16,"Editar "),e.qZA(),e.TgZ(17,"button",2),e.NdJ("click",function(){return o.handleChangeState(o.user)}),e._uU(18),e.qZA(),e.TgZ(19,"button",1),e.NdJ("click",function(){return o.handleDelete(o.user)}),e.TgZ(20,"mat-icon"),e._uU(21,"delete"),e.qZA(),e._uU(22,"Delete "),e.qZA()()(),e.YNc(23,j,1,1,"app-right-modal",3)),2&t&&(e.xp6(3),e.hij(" ",o.user.fullname," "),e.xp6(4),e.hij(" ",o.user.email,""),e.xp6(4),e.hij(" ",o.user.telefono,""),e.xp6(6),e.Q6J("ngStyle",e.VKq(6,B,o.user.active?"green":"red")),e.xp6(1),e.hij(" ",o.user.active?"Disabled":"Enabled"," "),e.xp6(5),e.Q6J("ngIf",o.isModalOpen))},dependencies:[u.O5,u.PC,h.lW,d.a8,d.hq,d.dk,d.$j,d.n5,b.Hw,N],encapsulation:2}),n})();function Y(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"users-user-card",7),e.NdJ("updateList",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.getUsers())}),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(1),e.Q6J("user",t)}}function Q(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-right-modal",8),e.NdJ("closeModal",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.closeModal())}),e.qZA()}}let K=(()=>{class n{constructor(t){this.userServices=t,this.isModalOpen=!1,this.users=[]}ngOnInit(){this.getUsers(),this.usersSubscription=this.userServices.users$.subscribe(t=>{this.users=t})}handleAdd(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1,this.getUsers()}getUsers(){this.userServices.getUsers()}ngOnDestroy(){this.usersSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-page"]],decls:10,vars:2,consts:[[1,"container","flex"],[1,"spacer"],["mat-button","","mat-raised","",3,"click"],[1,"grid","mb-8","pt-2"],["class","col-12 sm:col-12 md:col-12 xl:col-12",4,"ngFor","ngForOf"],[3,"closeModal",4,"ngIf"],[1,"col-12","sm:col-12","md:col-12","xl:col-12"],[3,"user","updateList"],[3,"closeModal"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"User list"),e.qZA(),e._UZ(3,"span",1),e.TgZ(4,"button",2),e.NdJ("click",function(){return o.handleAdd()}),e._uU(5,"add"),e.qZA()(),e._UZ(6,"mat-divider"),e.TgZ(7,"div",3),e.YNc(8,Y,2,1,"div",4),e.qZA(),e.YNc(9,Q,1,0,"app-right-modal",5)),2&t&&(e.xp6(8),e.Q6J("ngForOf",o.users),e.xp6(1),e.Q6J("ngIf",o.isModalOpen))},dependencies:[u.sg,u.O5,h.lW,Z.d,H,N],encapsulation:2}),n})();var O=function(n){return n.HOURS="HOURS",n.BLOCK="BLOCK",n}(O||{}),P=s(8645),W=s(6321),G=s(4825),w=s(8504),V=s(9773),ee=s(1631),te=s(4716);let ne=(()=>{class n{constructor(t,o){this.http=t,this.AuthServices=o,this.baseUrl=U.T.baseUrl,this.llamadasEnProgresoSubject=new M.X(!1),this.unsubscribe$=new P.x,this.llamadasEnProgreso$=this.llamadasEnProgresoSubject.asObservable(),this.user=(0,e.Flj)(()=>this.AuthServices.currentUser())}getServiceAll(){const t=`${this.baseUrl}/fish/getAllServiceAreas`,o=localStorage.getItem("token"),r=(new m.WM).set("x-token",`${o}`);return this.http.get(t,{headers:r})}getOffersAll(){const t=`${this.baseUrl}/fish/getAllOffers`,o=localStorage.getItem("token"),r=(new m.WM).set("x-token",`${o}`);return this.http.get(t,{headers:r})}realizarLlamadasHastaResultadoDeseado(t){const o=new P.x;return this.llamadasEnProgresoSubject.next(!0),function X(n=0,a=W.z){return n<0&&(n=0),(0,G.H)(n,n,a)}(2e3).pipe((0,V.R)(this.unsubscribe$),(0,ee.z)(()=>this.getOffersWithFilters(t)),(0,p.K)(r=>(console.error("Error en la solicitud HTTP:",r),(0,w._)(r))),(0,te.x)(()=>{this.llamadasEnProgresoSubject.next(!1),o.next(),o.complete()}))}detenerLlamadasRepetidas(){this.unsubscribe$.next()}getOffersWithFilters(t){const o=`${this.baseUrl}/fish/processOffer`,r=localStorage.getItem("token"),l={minBlockRate:"BLOCK"===t.baseOn?t.minHourPrice:null,minPayRatePerHour:"HOURS"===t.baseOn?t.minHourPrice:null,arrivalBuffer:t.delay,desiredWareHouses:t.depositos||[],startDate:t.startDate,startRunningAt:t.startRunningAt,maxHoursBlock:t.maxHoursBlock,fromTime:t.fromTime},c=(new m.WM).set("x-token",`${r}`);return this.http.post(o,l,{headers:c}).pipe((0,p.K)(g=>(console.error("Error en la solicitud HTTP:",g),(0,w._)(g))))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m.eN),e.LFG(T.J))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var oe=s(3680),re=s(8525),x=s(8034);let ae=(()=>{class n{transform(t){const o=new Date(1e3*t);return`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"time",type:n,pure:!0}),n})(),se=(()=>{class n{transform(t,o){const r=new Date(1e3*t),c=(new Date(1e3*o).getTime()-r.getTime())/6e4;return`${Math.floor(c/60)}h ${c%60}min`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"timeDifference",type:n,pure:!0}),n})(),ie=(()=>{class n{transform(t){const r=new Date(1e3*t);return`${["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][r.getDay()]}, ${r.getDate().toString().padStart(2,"0")}/${(r.getMonth()+1).toString().padStart(2,"0")}`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"customDate",type:n,pure:!0}),n})();function le(n,a){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function ce(n,a){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.serviceAreaId),e.xp6(1),e.hij(" ",t.serviceAreaName," ")}}function ue(n,a){if(1&n&&(e.TgZ(0,"tr",26)(1,"td"),e._uU(2),e.ALo(3,"time"),e.ALo(4,"time"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"timeDifference"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"customDate"),e.qZA(),e.TgZ(13,"td")(14,"span",27),e._uU(15),e.qZA()()()),2&n){const t=a.$implicit,o=e.oxw(2);e.xp6(2),e.AsE("",e.lcZ(3,8,t.startTime)," - ",e.lcZ(4,10,t.endTime),""),e.xp6(4),e.Oqu(e.xi3(7,12,t.startTime,t.endTime)),e.xp6(3),e.AsE("",t.rateInfo.priceAmount," ",t.rateInfo.currency,""),e.xp6(2),e.Oqu(e.lcZ(12,15,t.startTime)),e.xp6(3),e.Q6J("ngStyle",o.getStatusStyle(t)),e.xp6(1),e.hij(" ",o.getStatusText(t)," ")}}function de(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"table",24)(2,"thead")(3,"tr")(4,"th"),e._uU(5,"schedule"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"block hour"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"block price"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"date"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"action"),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,ue,16,17,"tr",25),e.qZA()(),e.BQk()),2&n){const t=e.oxw();e.xp6(15),e.Q6J("ngForOf",t.ofertas)}}function me(n,a){1&n&&(e.TgZ(0,"p"),e._uU(1,"There are no offers available at this time."),e.qZA())}const pe=[{path:"",component:$,children:[{path:"admin",component:K},{path:"controller",component:(()=>{class n{constructor(t,o){this.flexServices=t,this.snackbar=o,this.ofertas=[],this.ofertasAceptadas=[],this.filterForm=new i.cw({minHourPrice:new i.NI(0),baseOn:new i.NI(O.HOURS),startDate:new i.NI(new Date),fromTime:new i.NI(""),maxHoursBlock:new i.NI(0),delay:new i.NI(0),startRunningAt:new i.NI(""),depositos:new i.NI([])}),this.warehouses=[],this.baseOn=[{id:"HOURS",desc:"Hour"},{id:"BLOCK",desc:"Block"}]}get currentFilter(){return this.filterForm.value}ngOnInit(){this.getService()}getService(){this.flexServices.getServiceAll().pipe((0,p.K)(t=>(this.showSnackBar(t.error.error),[]))).subscribe(t=>this.warehouses=t)}showSnackBar(t){this.snackbar.open(t,"done",{duration:15e3})}getStatusStyle(t){return void 0!==this.ofertasAceptadas&&this.ofertasAceptadas.find(r=>r.id===t.offerId)?{color:"#28a745",padding:"5px 10px","border-radius":"5px"}:{color:"#dc3545",padding:"5px 10px","border-radius":"5px"}}getStatusText(t){const o=[];return void 0!==this.ofertasAceptadas&&Array.isArray(this.ofertasAceptadas)&&this.ofertasAceptadas.forEach(r=>{r.id===t.offerId&&o.push("Accepted")}),0===o.length&&o.push("Rejected"),o}onSubmit(){this.flexServices.realizarLlamadasHastaResultadoDeseado(this.currentFilter).subscribe(t=>{if(t.offersList){const o=t.offersList.filter(r=>!this.ofertas.find(l=>l.offerId===r.offerId));this.ofertas=this.ofertas.concat(o)}t.offersAccept&&Array.isArray(t.offersAccept.offer)&&(this.ofertasAceptadas=this.ofertasAceptadas.concat(t.offersAccept.offer))})}resetForm(){this.flexServices.detenerLlamadasRepetidas()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ne),e.Y36(A.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-controller-page"]],decls:58,vars:8,consts:[[1,"mb-2"],[1,"grid"],[1,"col-12","sm:col-12"],[1,"grid",3,"formGroup","ngSubmit"],[1,"col-6"],["matInput","","type","text","required","","formControlName","minHourPrice"],["formControlName","baseOn"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12"],["matInput","",3,"matDatepicker","formControlName"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","time","required","","formControlName","fromTime"],["matInput","","type","string","required","","formControlName","maxHoursBlock"],["matInput","","type","string","required","","formControlName","delay"],["matInput","","type","time","required","","formControlName","startRunningAt"],["formControlName","depositos","multiple",""],["mat-flat-button","","color","warn",3,"click"],[1,"spacer"],["mat-flat-button","","color","primary",3,"click"],[2,"overflow-x","auto"],[4,"ngIf","ngIfElse"],["emptyState",""],[3,"value"],[2,"width","100%","table-layout","fixed"],["style","text-align: center;",4,"ngFor","ngForOf"],[2,"text-align","center"],[3,"ngStyle"]],template:function(t,o){if(1&t&&(e._UZ(0,"mat-divider",0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-card")(4,"mat-card-content")(5,"form",3),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(6,"mat-form-field",4)(7,"mat-label"),e._uU(8,"Min hour price"),e.qZA(),e._UZ(9,"input",5),e.qZA(),e.TgZ(10,"mat-form-field",4)(11,"mat-label"),e._uU(12,"Base on"),e.qZA(),e.TgZ(13,"mat-select",6),e.YNc(14,le,2,2,"mat-option",7),e.qZA()(),e.TgZ(15,"mat-form-field",8)(16,"mat-label"),e._uU(17,"Start date"),e.qZA(),e._UZ(18,"input",9)(19,"mat-datepicker-toggle",10)(20,"mat-datepicker",null,11),e.qZA(),e.TgZ(22,"mat-form-field",4)(23,"mat-label"),e._uU(24,"From time"),e.qZA(),e._UZ(25,"input",12),e.qZA(),e.TgZ(26,"mat-form-field",4)(27,"mat-label"),e._uU(28,"Max hours block"),e.qZA(),e._UZ(29,"input",13),e.qZA(),e.TgZ(30,"mat-form-field",4)(31,"mat-label"),e._uU(32,"Delay (Min)"),e.qZA(),e._UZ(33,"input",14),e.qZA(),e.TgZ(34,"mat-form-field",4)(35,"mat-label"),e._uU(36,"Start running at"),e.qZA(),e._UZ(37,"input",15),e.qZA(),e.TgZ(38,"mat-form-field",8)(39,"mat-label"),e._uU(40,"Deposits:"),e.qZA(),e.TgZ(41,"mat-select",16),e.YNc(42,ce,2,2,"mat-option",7),e.qZA()()()(),e.TgZ(43,"mat-card-actions")(44,"button",17),e.NdJ("click",function(){return o.resetForm()}),e._uU(45,"CANCEL"),e.qZA(),e._UZ(46,"span",18),e.TgZ(47,"button",19),e.NdJ("click",function(){return o.onSubmit()}),e.TgZ(48,"mat-icon"),e._uU(49,"save"),e.qZA(),e._uU(50," START "),e.qZA()()()(),e.TgZ(51,"div",2)(52,"mat-card")(53,"mat-card-content")(54,"div",20),e.YNc(55,de,16,1,"ng-container",21),e.YNc(56,me,2,0,"ng-template",null,22,e.W1O),e.qZA()()()()()),2&t){const r=e.MAs(21),l=e.MAs(57);e.xp6(5),e.Q6J("formGroup",o.filterForm),e.xp6(9),e.Q6J("ngForOf",o.baseOn),e.xp6(4),e.Q6J("matDatepicker",r)("formControlName","startDate"),e.xp6(1),e.Q6J("for",r),e.xp6(23),e.Q6J("ngForOf",o.warehouses),e.xp6(13),e.Q6J("ngIf",o.ofertas.length>0)("ngIfElse",l)}},dependencies:[u.sg,u.O5,u.PC,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,oe.ey,h.lW,d.a8,d.hq,d.dn,_.KE,_.hX,_.R9,b.Hw,F.Nt,Z.d,re.gD,x.Mq,x.hl,x.nW,ae,se,ie],encapsulation:2}),n})()},{path:"**",redirectTo:"controller"}]}];let ge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.Bz.forChild(pe),f.Bz]}),n})();var fe=s(2088),he=s(6208);const Ce=new e.OlP("ngx-skeleton-loader.config");let ve=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Ce,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez]}),n})(),Ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,i.UX,ge,fe.q,ve,he.m]}),n})()}}]);